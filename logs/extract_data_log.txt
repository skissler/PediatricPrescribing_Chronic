NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11         
12         * Set path for printing output;
13         proc printto print="/home/kissler/PediatricPrescribing_Chronic/logs/extract_data_out.txt" new;
14         run;

NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

15         
16         * Set path for saving output;
17         libname out "/home/kissler/PediatricPrescribing_Chronic/output/buildfiles/";
NOTE: Library OUT does not exist.
18         
19         * Specify data libraries;
20         libname dathome "/data/markscan_authorized/data";
NOTE: Libref DATHOME was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data
21         libname dat08 "/data/markscan_authorized_users/kissler/dat08";
NOTE: Libref DAT08 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized_users/kissler/dat08
22         libname dat09 "/data/markscan_authorized_users/kissler/dat09";
NOTE: Libref DAT09 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized_users/kissler/dat09
23         libname dat10 "/data/markscan_authorized/data/commercial/2010";
NOTE: Libref DAT10 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2010
24         libname dat11 "/data/markscan_authorized/data/commercial/2011";
NOTE: Libref DAT11 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2011
25         libname dat12 "/data/markscan_authorized/data/commercial/2012";
NOTE: Libref DAT12 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2012
26         libname dat13 "/data/markscan_authorized/data/commercial/2013";
NOTE: Libref DAT13 was successfully assigned as follows: 
      Engine:        V9 
3                                                          The SAS System                            13:36 Monday, September 5, 2022

      Physical Name: /data/markscan_authorized/data/commercial/2013
27         libname dat14 "/data/markscan_authorized/data/commercial/2014";
NOTE: Libref DAT14 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2014
28         libname dat15 "/data/markscan_authorized/data/commercial/2015";
NOTE: Libref DAT15 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2015
29         libname dat16 "/data/markscan_authorized/data/commercial/2016";
NOTE: Libref DAT16 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2016
30         libname dat17 "/data/markscan_authorized/data/commercial/2017";
NOTE: Libref DAT17 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2017
31         libname dat18 "/data/markscan_authorized/data/commercial/2018";
NOTE: Libref DAT18 was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /data/markscan_authorized/data/commercial/2018
32         
33         
34         * Import and process table of days per month --------------------------------;
35         proc import datafile="/home/kissler/PediatricPrescribing_Chronic/data/dayspermonth.csv"
36                 out=dayspermonth
37                 dbms=csv
38                 replace;
39         run;

40          /**********************************************************************
41          *   PRODUCT:   SAS
42          *   VERSION:   9.4
43          *   CREATOR:   External File Interface
44          *   DATE:      05SEP22
45          *   DESC:      Generated SAS Datastep Code
46          *   TEMPLATE SOURCE:  (None Specified.)
47          ***********************************************************************/
48             data WORK.DAYSPERMONTH    ;
49             %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
50             infile '/home/kissler/PediatricPrescribing_Chronic/data/dayspermonth.csv' delimiter = ',' MISSOVER DSD lrecl=32767
50       ! firstobs=2 ;
51                informat DT_MONTH best32. ;
52                informat NDAYS best32. ;
53                format DT_MONTH best12. ;
54                format NDAYS best12. ;
55             input
56                         DT_MONTH
57                         NDAYS
58             ;
59             if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
60             run;

NOTE: The infile '/home/kissler/PediatricPrescribing_Chronic/data/dayspermonth.csv' is:
      Filename=/home/kissler/PediatricPrescribing_Chronic/data/dayspermonth.csv,
      Owner Name=kissler,Group Name=users,
      Access Permission=-rwx------,
      Last Modified=18Aug2022:11:12:59,
4                                                          The SAS System                            13:36 Monday, September 5, 2022

      File Size (bytes)=89

NOTE: 12 records were read from the infile '/home/kissler/PediatricPrescribing_Chronic/data/dayspermonth.csv'.
      The minimum record length was 4.
      The maximum record length was 5.
NOTE: The data set WORK.DAYSPERMONTH has 12 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12 rows created in WORK.DAYSPERMONTH from /home/kissler/PediatricPrescribing_Chronic/data/dayspermonth.csv.
  
  
  
NOTE: WORK.DAYSPERMONTH data set was successfully created.
NOTE: The data set WORK.DAYSPERMONTH has 12 observations and 2 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.10 seconds
      cpu time            0.05 seconds
      

61         
62         proc sort data=dayspermonth;
63         	by DT_MONTH;
64         run;

NOTE: There were 12 observations read from the data set WORK.DAYSPERMONTH.
NOTE: The data set WORK.DAYSPERMONTH has 12 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

65         
66         * Import and process list of NDC codes to extract -----------------------------;
67         proc import datafile="/home/kissler/PediatricPrescribing_Chronic/data/ndc_to_extract.csv"
68                 out=ndctoextract
69                 dbms=csv
70                 replace;
71         run;

72          /**********************************************************************
73          *   PRODUCT:   SAS
74          *   VERSION:   9.4
75          *   CREATOR:   External File Interface
76          *   DATE:      05SEP22
77          *   DESC:      Generated SAS Datastep Code
78          *   TEMPLATE SOURCE:  (None Specified.)
79          ***********************************************************************/
80             data WORK.NDCTOEXTRACT    ;
81             %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
82             infile '/home/kissler/PediatricPrescribing_Chronic/data/ndc_to_extract.csv' delimiter = ',' MISSOVER DSD lrecl=32767
82       ! firstobs=2 ;
83                informat NDCNUM $13. ;
84                informat THRCLDS $27. ;
85                informat THRDTDS $22. ;
86                informat ROADS $13. ;
5                                                          The SAS System                            13:36 Monday, September 5, 2022

87                format NDCNUM $13. ;
88                format THRCLDS $27. ;
89                format THRDTDS $22. ;
90                format ROADS $13. ;
91             input
92                         NDCNUM  $
93                         THRCLDS  $
94                         THRDTDS  $
95                         ROADS  $
96             ;
97             if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
98             run;

NOTE: The infile '/home/kissler/PediatricPrescribing_Chronic/data/ndc_to_extract.csv' is:
      Filename=/home/kissler/PediatricPrescribing_Chronic/data/ndc_to_extract.csv,
      Owner Name=kissler,Group Name=users,
      Access Permission=-rwx------,
      Last Modified=25Aug2022:12:37:28,
      File Size (bytes)=1434824

NOTE: 21220 records were read from the infile '/home/kissler/PediatricPrescribing_Chronic/data/ndc_to_extract.csv'.
      The minimum record length was 43.
      The maximum record length was 92.
NOTE: The data set WORK.NDCTOEXTRACT has 21220 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.02 seconds
      

21220 rows created in WORK.NDCTOEXTRACT from /home/kissler/PediatricPrescribing_Chronic/data/ndc_to_extract.csv.
  
  
  
NOTE: WORK.NDCTOEXTRACT data set was successfully created.
NOTE: The data set WORK.NDCTOEXTRACT has 21220 observations and 4 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.10 seconds
      cpu time            0.09 seconds
      

99         
100        proc sort data=ndctoextract;
101        	by NDCNUM;
102        run;

NOTE: There were 21220 observations read from the data set WORK.NDCTOEXTRACT.
NOTE: The data set WORK.NDCTOEXTRACT has 21220 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

103        
104        * Import and process table of US states --------------------------------------;
105        proc import datafile="/home/kissler/PediatricPrescribing_Chronic/data/EGEOLOClist_char.csv"
106                out=EGEOLOClist
107                dbms=csv
108                replace;
6                                                          The SAS System                            13:36 Monday, September 5, 2022

109        run;

110         /**********************************************************************
111         *   PRODUCT:   SAS
112         *   VERSION:   9.4
113         *   CREATOR:   External File Interface
114         *   DATE:      05SEP22
115         *   DESC:      Generated SAS Datastep Code
116         *   TEMPLATE SOURCE:  (None Specified.)
117         ***********************************************************************/
118            data WORK.EGEOLOCLIST    ;
119            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
120            infile '/home/kissler/PediatricPrescribing_Chronic/data/EGEOLOClist_char.csv' delimiter = ',' MISSOVER DSD
120      ! lrecl=32767 firstobs=2 ;
121               informat EGEOLOC $4. ;
122               informat STATE $13. ;
123               format EGEOLOC $4. ;
124               format STATE $13. ;
125            input
126                        EGEOLOC  $
127                        STATE  $
128            ;
129            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
130            run;

NOTE: The infile '/home/kissler/PediatricPrescribing_Chronic/data/EGEOLOClist_char.csv' is:
      Filename=/home/kissler/PediatricPrescribing_Chronic/data/EGEOLOClist_char.csv,
      Owner Name=kissler,Group Name=users,
      Access Permission=-rwx------,
      Last Modified=23Aug2022:11:02:02,
      File Size (bytes)=805

NOTE: 51 records were read from the infile '/home/kissler/PediatricPrescribing_Chronic/data/EGEOLOClist_char.csv'.
      The minimum record length was 9.
      The maximum record length was 19.
NOTE: The data set WORK.EGEOLOCLIST has 51 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

51 rows created in WORK.EGEOLOCLIST from /home/kissler/PediatricPrescribing_Chronic/data/EGEOLOClist_char.csv.
  
  
  
NOTE: WORK.EGEOLOCLIST data set was successfully created.
NOTE: The data set WORK.EGEOLOCLIST has 51 observations and 2 variables.
NOTE: PROCEDURE IMPORT used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      

131        
132        * Make sure variable lengths are sufficient to avoid truncation:;
133        data EGEOLOClist;
134        	length STATE $30;
135            set EGEOLOClist(rename=(STATE=STATE_orig));
136            STATE=STATE_orig;
7                                                          The SAS System                            13:36 Monday, September 5, 2022

137        run;

NOTE: There were 51 observations read from the data set WORK.EGEOLOCLIST.
NOTE: The data set WORK.EGEOLOCLIST has 51 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

138        
139        proc sort data=EGEOLOClist;
140        	by EGEOLOC;
141        run;

NOTE: There were 51 observations read from the data set WORK.EGEOLOCLIST.
NOTE: The data set WORK.EGEOLOCLIST has 51 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

142        
143        * ============================================================================;
144        * Define extraction/reduction scripts;
145        * ============================================================================;
146        
147        * Extract birth dates;
148        %macro getbirthdates(year=,yeartag=);
149        
150        	* Initial import of inpatient services table;
151        	data cohortBirthdates&year. (keep=ENROLID SVCDATE);
152        		set dat&year..ccaes&year.&yeartag. (keep=AGE DX1 DX2 ENROLID SVCDATE where=(AGE=0 and (substr(DX1,1,3)="V30" or
153        				substr(DX1,1,3)="V31" or
154        				substr(DX1,1,3)="V32" or
155        				substr(DX1,1,3)="V33" or
156        				substr(DX1,1,3)="V34" or
157        				substr(DX1,1,3)="V35" or
158        				substr(DX1,1,3)="V36" or
159        				substr(DX1,1,3)="V37" or
160        				substr(DX1,1,3)="V39" or
161        				substr(DX1,1,3)="Z38" or
162        				substr(DX2,1,3)="V30" or
163        				substr(DX2,1,3)="V31" or
164        				substr(DX2,1,3)="V32" or
165        				substr(DX2,1,3)="V33" or
166        				substr(DX2,1,3)="V34" or
167        				substr(DX2,1,3)="V35" or
168        				substr(DX2,1,3)="V36" or
169        				substr(DX2,1,3)="V37" or
170        				substr(DX2,1,3)="V39" or
171        				substr(DX2,1,3)="Z38")));
172        	run;
173        
174        	* Sort by visit date;
175        	proc sort data=cohortBirthdates&year.;
176        		by ENROLID SVCDATE;
177        	run;
178        
8                                                          The SAS System                            13:36 Monday, September 5, 2022

179        	* For each person, pull out the earliest date (the birth date);
180        	data cohortBirthdates&year. (keep=ENROLID BIRTH_DATE);
181        		set cohortBirthdates&year. (rename=(SVCDATE=BIRTH_DATE));
182        		by ENROLID;
183        		if first.ENROLID;
184        	run;
185        
186        %mend;
187        
188        * Extract individuals with prescriptions under the age of 5;
189        %macro getcohort(year=,yeartag=);
190        
191        	* Initial import, ensuring we have RX data and age <= 5;
192        	data cohort&year. (keep=DT_MONTH DT_YEAR DTEND EGEOLOC MSA ENROLID MEMDAYS SEX);
193        		set dat&year..ccaet&year.&yeartag. (keep=AGE RX DTEND EGEOLOC MSA ENROLID MEMDAYS SEX where=(RX="1" and AGE<=5));
194        		DT_MONTH=month(DTEND);
195        		DT_YEAR=year(DTEND);
196        	run;
197        
198        	* Restrict to valid states;
199        	proc sort data=cohort&year.;
200        		by EGEOLOC;
201        	run;
202        
203        	data cohort&year. (keep=DT_MONTH DT_YEAR DTEND STATE MSA ENROLID MEMDAYS SEX BIRTH_DATE);
204        		merge EGEOLOClist (in=inleft)
205        		cohort&year. (in=inright);
206        		by EGEOLOC;
207        		IF inleft & inright;
208        	run;
209        
210        	* Restrict to those with a birth date;
211        	proc sort data=cohort&year.;
212        		by ENROLID;
213        	run;
214        
215        	data cohort&year. (keep=DT_MONTH DT_YEAR DTEND STATE MSA ENROLID MEMDAYS SEX BIRTH_DATE);
216        		merge cohortBirthdates (in=inleft)
217        		cohort&year. (in=inright);
218        		by ENROLID;
219        		IF inleft & inright;
220        	run;
221        
222        	* Keep only rows corresponding to full months or the birth month;
223        	proc sort data=cohort&year.;
224        		by DT_MONTH;
225        	run;
226        
227        	data cohort&year. (keep=DT_MONTH DT_YEAR DTEND STATE MSA ENROLID MEMDAYS SEX BIRTH_DATE NDAYS where=((MEMDAYS>=NDAYS) or
227      !  (month(BIRTH_DATE)=DT_MONTH and year(BIRTH_DATE)=DT_YEAR)));
228        		merge dayspermonth (in=inleft)
229        		cohort&year. (in=inright);
230        		by DT_MONTH;
231        		IF inleft & inright;
232        	run;
233        
234        	* Keep only relevant columns;
235        	data cohort&year. (keep=DT_MONTH DT_YEAR DTEND STATE MSA ENROLID SEX BIRTH_DATE);
9                                                          The SAS System                            13:36 Monday, September 5, 2022

236        		set cohort&year.;
237        	run;
238        
239        %mend;
240        
241        * Reduce to individuals who are present for five straight years;
242        %macro refinecohort();
243        
244        	* Sort the cohort table;
245        	proc sort data=cohort;
246        		by ENROLID DT_YEAR DT_MONTH;
247        	run;
248        
249        	* Count months from birth;
250        	data cohort (keep=DT_MONTH DT_YEAR DTEND STATE MSA ENROLID SEX BIRTH_DATE COUNT);
251        		set cohort;
252        		COUNT + 1;
253        		by ENROLID;
254        		if first.ENROLID then COUNT = 0;
255        	run;
256        
257        	* Append an index column;
258        	data cohort (keep=DT_MONTH DT_YEAR DTEND STATE MSA ENROLID SEX BIRTH_DATE COUNT BIRTHDIFF);
259        		set cohort;
260        		BIRTHDIFF=12*(DT_YEAR-year(BIRTH_DATE))+(DT_MONTH-month(BIRTH_DATE));
261        	run;
262        
263        	* keep only rows where index = months from birth, which gives contiguous months from birth;
264        	data cohort (keep=DTEND STATE MSA ENROLID SEX BIRTH_DATE COUNT BIRTHDIFF where=(COUNT=BIRTHDIFF));
265        		set cohort;
266        	run;
267        
268        	* keep only one row per person (the last);
269        	proc sort data=cohort;
270        		by ENROLID COUNT;
271        	run;
272        
273        	data cohort (keep=DTEND STATE MSA ENROLID SEX BIRTH_DATE);
274        		set cohort;
275        		by ENROLID;
276        		if last.ENROLID;
277        	run;
278        
279        	* Calculate how long each person is followed;
280        	data cohort (keep=DTEND STATE MSA ENROLID SEX BIRTH_DATE DURATION);
281        		set cohort;
282        		DURATION=DTEND-BIRTH_DATE;
283        	run;
284        
285        	* Censor people after 5 years (1825 days);
286        	proc sort data=cohort;
287        		by DURATION;
288        	run;
289        
290        	data cohort (keep=STATE MSA ENROLID SEX BIRTH_DATE DURATION);
291        		set cohort;
292        		by DURATION;
293        		if DURATION>=1825; *change to 1825;
10                                                         The SAS System                            13:36 Monday, September 5, 2022

294        	run;
295        
296        	data cohort (keep=STATE MSA ENROLID SEX BIRTH_DATE CENSOR_DATE);
297        		set cohort;
298        		CENSOR_DATE=BIRTH_DATE+1825; *change to 1825;
299        		format CENSOR_DATE mmddyys10.;
300        	run;
301        
302        	data cohort;
303        		set cohort;
304        		if STATE="North Carolin" then STATE="North Carolina";
305        		if STATE="South Carolin" then STATE="South Carolina";
306        	run;
307        
308        %mend;
309        
310        * Get prescription data;
311        %macro getrx(year=,yeartag=);
312        
313        	proc sort data=cohort;
314        		by ENROLID;
315        	run;
316        
317        	* Import 'd' and reduce to those with valid birth date;
318        	data d&year. (keep=ENROLID NDCNUM REFILL SVCDATE BIRTH_DATE CENSOR_DATE);
319        		merge cohort (in=inleft)
320        		dat&year..ccaed&year.&yeartag. (in=inright keep=ENROLID NDCNUM REFILL SVCDATE); *  where=(REFILL=0);
321        		by ENROLID;
322        		IF inleft & inright;
323        	run;
324        
325        	* Restrict to antibiotic prescriptions;
326        	proc sort data=d&year.;
327        		by NDCNUM;
328        	run;
329        
330        	data d&year. (keep=ENROLID NDCNUM REFILL SVCDATE BIRTH_DATE CENSOR_DATE);
331        		merge ndctoextract (keep=NDCNUM in=inleft)
332        		d&year. (in=inright);
333        		by NDCNUM;
334        		IF inleft & inright;
335        	run;
336        
337        	* Keep only records between the birth date and censor date;
338        	data d&year. (keep=ENROLID DATE CODE REFILL);
339        		rename SVCDATE=DATE NDCNUM=CODE;
340        	    set d&year.;
341        	    where BIRTH_DATE<=SVCDATE<=CENSOR_DATE;
342        	run;
343        
344        	* Get unique records by person, date, and NDC;
345        	proc sort data=d&year. nodupkey;
346        		by ENROLID DATE CODE;
347        	run;
348        
349        %mend;
350        
351        * Get visit data;
11                                                         The SAS System                            13:36 Monday, September 5, 2022

352        
353        %macro getvisits_pre10(year=,yeartag=);
354        
355        	proc sort data=cohort;
356        		by ENROLID;
357        	run;
358        
359        	* Import 'o' and reduce to those with valid birth date;
360        	data o&year. (keep=DX1 DX2 ENROLID SVCDATE BIRTH_DATE CENSOR_DATE STDPLAC);
361        		merge cohort (in=inleft)
362        		dat&year..ccaeo&year.&yeartag. (in=inright keep=DX1 DX2 ENROLID SVCDATE STDPLAC);
363        		by ENROLID;
364        		IF inleft & inright;
365        	run;
366        
367        	* Keep only visits between birth and censor date;
368        	data o&year. (keep=DX1 DX2 DX3 DX4 ENROLID DATE ICD STDPLAC);
369        		rename SVCDATE=DATE;
370        		length DX1 $30. DX2 $30. DX3 $30. DX4 $30.;
371        	    set o&year.(rename=(DX1=DX1_orig DX2=DX2_orig));
372        	    where BIRTH_DATE<=SVCDATE<=CENSOR_DATE;
373        	    ICD="9";
374        	    DX1=DX1_orig;
375        	    DX2=DX2_orig;
376        	    DX3="";
377        	    DX4="";
378        	    length DX3 $30. DX4 $30.;
379        	run;
380        
381        	data visit_df&year. (keep=ENROLID DATE DX1 DX2 DX3 DX4 ICD STDPLAC);
382        		set o&year.;
383        	run;
384        
385        	proc sort data=visit_df&year. nodupkey;
386        		by ENROLID DATE;
387        	run;
388        
389        	proc delete data=o&year.; run;
390        
391        %mend;
392        
393        
394        %macro getvisits_pre15(year=,yeartag=);
395        
396        	proc sort data=cohort;
397        		by ENROLID;
398        	run;
399        
400        	* Import 'o' and reduce to those with valid birth date;
401        	data o&year. (keep=DX1 DX2 DX3 DX4 ENROLID SVCDATE BIRTH_DATE CENSOR_DATE STDPLAC);
402        		merge cohort (in=inleft)
403        		dat&year..ccaeo&year.&yeartag. (in=inright keep=DX1 DX2 DX3 DX4 ENROLID SVCDATE STDPLAC);
404        		by ENROLID;
405        		IF inleft & inright;
406        	run;
407        
408        	* Keep only visits between birth and censor date;
409        	data o&year. (keep=DX1 DX2 DX3 DX4 ENROLID DATE ICD STDPLAC);
12                                                         The SAS System                            13:36 Monday, September 5, 2022

410        		rename SVCDATE=DATE;
411        		length DX1 $30. DX2 $30. DX3 $30. DX4 $30.;
412        	    set o&year.(rename=(DX1=DX1_orig DX2=DX2_orig DX3=DX3_orig DX4=DX4_orig));
413        	    where BIRTH_DATE<=SVCDATE<=CENSOR_DATE;
414        	    ICD="9";
415        	    DX1=DX1_orig;
416        	    DX2=DX2_orig;
417        	    DX3=DX3_orig;
418        	    DX4=DX4_orig;
419        	run;
420        
421        	data visit_df&year. (keep=ENROLID DATE DX1 DX2 DX3 DX4 ICD STDPLAC);
422        		set o&year.;
423        	run;
424        
425        	proc sort data=visit_df&year. nodupkey;
426        		by ENROLID DATE;
427        	run;
428        
429        	proc delete data=o&year.; run;
430        
431        %mend;
432        
433        %macro getvisits_post15(year=,yeartag=);
434        
435        	proc sort data=cohort;
436        		by ENROLID;
437        	run;
438        
439        	* Import 'o' and reduce to those with valid birth date;
440        	data o&year. (keep=DX1 DX2 DX3 DX4 ENROLID SVCDATE DXVER BIRTH_DATE CENSOR_DATE STDPLAC);
441        		merge cohort (in=inleft)
442        		dat&year..ccaeo&year.&yeartag. (in=inright keep=DX1 DX2 DX3 DX4 ENROLID SVCDATE DXVER STDPLAC);
443        		by ENROLID;
444        		IF inleft & inright;
445        	run;
446        
447        	* Keep only visits between birth and censor date;
448        	data o&year. (keep=DX1 DX2 DX3 DX4 ENROLID DATE ICD STDPLAC);
449        		rename SVCDATE=DATE DXVER=ICD;
450        		length DX1 $30. DX2 $30. DX3 $30. DX4 $30.;
451        	    set o&year.(rename=(DX1=DX1_orig DX2=DX2_orig DX3=DX3_orig DX4=DX4_orig));
452        	    where BIRTH_DATE<=SVCDATE<=CENSOR_DATE;
453        	    DX1=DX1_orig;
454        	    DX2=DX2_orig;
455        	    DX3=DX3_orig;
456        	    DX4=DX4_orig;
457        	run;
458        
459        	data visit_df&year. (keep=ENROLID DATE DX1 DX2 DX3 DX4 ICD STDPLAC);
460        		set o&year.;
461        	run;
462        
463        	* Keep just one visit per person per date;
464        	proc sort data=visit_df&year. nodupkey;
465        		by ENROLID DATE;
466        	run;
467        
13                                                         The SAS System                            13:36 Monday, September 5, 2022

468        	proc delete data=o&year.; run;
469        
470        %mend;
471        
472        * ============================================================================;
473        * Run the extraction;
474        * ============================================================================;
475        
476        * Get birthdates --------------------------------------------------------------;
477        %getbirthdates(year=08, yeartag=2); *2sam;
NOTE: Data file DAT08.CCAES082.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2532424 observations read from the data set DAT08.CCAES082.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES08 has 2532424 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           1:00.18
      cpu time            52.11 seconds
      


NOTE: There were 2532424 observations read from the data set WORK.COHORTBIRTHDATES08.
NOTE: The data set WORK.COHORTBIRTHDATES08 has 2532424 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.29 seconds
      cpu time            0.83 seconds
      


NOTE: There were 2532424 observations read from the data set WORK.COHORTBIRTHDATES08.
NOTE: The data set WORK.COHORTBIRTHDATES08 has 228998 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds
      

478        %getbirthdates(year=09, yeartag=1); *1sam;
NOTE: Data file DAT09.CCAES091.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2411807 observations read from the data set DAT09.CCAES091.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES09 has 2411807 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           55.02 seconds
      cpu time            52.91 seconds
      


NOTE: There were 2411807 observations read from the data set WORK.COHORTBIRTHDATES09.
NOTE: The data set WORK.COHORTBIRTHDATES09 has 2411807 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.31 seconds
14                                                         The SAS System                            13:36 Monday, September 5, 2022

      cpu time            0.86 seconds
      


NOTE: There were 2411807 observations read from the data set WORK.COHORTBIRTHDATES09.
NOTE: The data set WORK.COHORTBIRTHDATES09 has 221032 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.17 seconds
      cpu time            0.17 seconds
      

479        %getbirthdates(year=10, yeartag=1); *1sam;
NOTE: Data file DAT10.CCAES101.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2818660 observations read from the data set DAT10.CCAES101.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES10 has 2818660 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           1:02.40
      cpu time            57.61 seconds
      


NOTE: There were 2818660 observations read from the data set WORK.COHORTBIRTHDATES10.
NOTE: The data set WORK.COHORTBIRTHDATES10 has 2818660 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.33 seconds
      cpu time            0.96 seconds
      


NOTE: There were 2818660 observations read from the data set WORK.COHORTBIRTHDATES10.
NOTE: The data set WORK.COHORTBIRTHDATES10 has 237661 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.19 seconds
      cpu time            0.20 seconds
      

480        %getbirthdates(year=11, yeartag=1); *1sam;
NOTE: Data file DAT11.CCAES111.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 3309219 observations read from the data set DAT11.CCAES111.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES11 has 3309219 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           1:08.85
      cpu time            1:05.09
      


NOTE: There were 3309219 observations read from the data set WORK.COHORTBIRTHDATES11.
NOTE: The data set WORK.COHORTBIRTHDATES11 has 3309219 observations and 2 variables.
15                                                         The SAS System                            13:36 Monday, September 5, 2022

NOTE: PROCEDURE SORT used (Total process time):
      real time           0.38 seconds
      cpu time            1.12 seconds
      


NOTE: There were 3309219 observations read from the data set WORK.COHORTBIRTHDATES11.
NOTE: The data set WORK.COHORTBIRTHDATES11 has 271669 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.23 seconds
      cpu time            0.23 seconds
      

481        %getbirthdates(year=12, yeartag=1); *1sam;
NOTE: Data file DAT12.CCAES121.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 3446009 observations read from the data set DAT12.CCAES121.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES12 has 3446009 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           1:07.21
      cpu time            1:06.90
      


NOTE: There were 3446009 observations read from the data set WORK.COHORTBIRTHDATES12.
NOTE: The data set WORK.COHORTBIRTHDATES12 has 3446009 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.39 seconds
      cpu time            1.15 seconds
      


NOTE: There were 3446009 observations read from the data set WORK.COHORTBIRTHDATES12.
NOTE: The data set WORK.COHORTBIRTHDATES12 has 278966 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.23 seconds
      cpu time            0.23 seconds
      

482        %getbirthdates(year=13, yeartag=1); *1sam;
NOTE: Data file DAT13.CCAES131.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2690646 observations read from the data set DAT13.CCAES131.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES13 has 2690646 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           55.39 seconds
      cpu time            54.63 seconds
      


16                                                         The SAS System                            13:36 Monday, September 5, 2022

NOTE: There were 2690646 observations read from the data set WORK.COHORTBIRTHDATES13.
NOTE: The data set WORK.COHORTBIRTHDATES13 has 2690646 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.31 seconds
      cpu time            0.91 seconds
      


NOTE: There were 2690646 observations read from the data set WORK.COHORTBIRTHDATES13.
NOTE: The data set WORK.COHORTBIRTHDATES13 has 215995 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds
      

483        %getbirthdates(year=14, yeartag=1); *1sam;
NOTE: Data file DAT14.CCAES141.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2864091 observations read from the data set DAT14.CCAES141.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES14 has 2864091 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           53.49 seconds
      cpu time            53.21 seconds
      


NOTE: There were 2864091 observations read from the data set WORK.COHORTBIRTHDATES14.
NOTE: The data set WORK.COHORTBIRTHDATES14 has 2864091 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.32 seconds
      cpu time            0.95 seconds
      


NOTE: There were 2864091 observations read from the data set WORK.COHORTBIRTHDATES14.
NOTE: The data set WORK.COHORTBIRTHDATES14 has 227072 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.19 seconds
      cpu time            0.19 seconds
      

484        %getbirthdates(year=15, yeartag=1); *1sam;
NOTE: Data file DAT15.CCAES151.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2130355 observations read from the data set DAT15.CCAES151.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES15 has 2130355 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           35.62 seconds
      cpu time            35.10 seconds
      
17                                                         The SAS System                            13:36 Monday, September 5, 2022



NOTE: There were 2130355 observations read from the data set WORK.COHORTBIRTHDATES15.
NOTE: The data set WORK.COHORTBIRTHDATES15 has 2130355 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.24 seconds
      cpu time            0.71 seconds
      


NOTE: There were 2130355 observations read from the data set WORK.COHORTBIRTHDATES15.
NOTE: The data set WORK.COHORTBIRTHDATES15 has 163729 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

485        %getbirthdates(year=16, yeartag=1); *1sam;
NOTE: Data file DAT16.CCAES161.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 2147685 observations read from the data set DAT16.CCAES161.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES16 has 2147685 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           34.01 seconds
      cpu time            33.37 seconds
      


NOTE: There were 2147685 observations read from the data set WORK.COHORTBIRTHDATES16.
NOTE: The data set WORK.COHORTBIRTHDATES16 has 2147685 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.23 seconds
      cpu time            0.70 seconds
      


NOTE: There were 2147685 observations read from the data set WORK.COHORTBIRTHDATES16.
NOTE: The data set WORK.COHORTBIRTHDATES16 has 160583 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

486        %getbirthdates(year=17, yeartag=1); *1sam;
NOTE: Data file DAT17.CCAES171.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 1918058 observations read from the data set DAT17.CCAES171.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES17 has 1918058 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           34.06 seconds
18                                                         The SAS System                            13:36 Monday, September 5, 2022

      cpu time            31.02 seconds
      


NOTE: There were 1918058 observations read from the data set WORK.COHORTBIRTHDATES17.
NOTE: The data set WORK.COHORTBIRTHDATES17 has 1918058 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.22 seconds
      cpu time            0.66 seconds
      


NOTE: There were 1918058 observations read from the data set WORK.COHORTBIRTHDATES17.
NOTE: The data set WORK.COHORTBIRTHDATES17 has 148490 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.13 seconds
      cpu time            0.13 seconds
      

487        %getbirthdates(year=18, yeartag=1); *1sam;
NOTE: Data file DAT18.CCAES181.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 1999049 observations read from the data set DAT18.CCAES181.
      WHERE (AGE=0) and (SUBSTR(DX1, 1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38') or SUBSTR(DX2, 
      1, 3) in ('V30', 'V31', 'V32', 'V33', 'V34', 'V35', 'V36', 'V37', 'V39', 'Z38'));
NOTE: The data set WORK.COHORTBIRTHDATES18 has 1999049 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           32.16 seconds
      cpu time            31.89 seconds
      


NOTE: There were 1999049 observations read from the data set WORK.COHORTBIRTHDATES18.
NOTE: The data set WORK.COHORTBIRTHDATES18 has 1999049 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.24 seconds
      cpu time            0.72 seconds
      


NOTE: There were 1999049 observations read from the data set WORK.COHORTBIRTHDATES18.
NOTE: The data set WORK.COHORTBIRTHDATES18 has 158157 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds
      

488        
489        * Combine birthdates into a single data table ---------------------------------;
490        data cohortBirthdates;
491        	set cohortBirthdates08
492        		cohortBirthdates09
493        		cohortBirthdates10
494        		cohortBirthdates11
495        		cohortBirthdates12
496        		cohortBirthdates13
19                                                         The SAS System                            13:36 Monday, September 5, 2022

497        		cohortBirthdates14
498        		cohortBirthdates15
499        		cohortBirthdates16
500        		cohortBirthdates17
501        		cohortBirthdates18;
502        run;

NOTE: There were 228998 observations read from the data set WORK.COHORTBIRTHDATES08.
NOTE: There were 221032 observations read from the data set WORK.COHORTBIRTHDATES09.
NOTE: There were 237661 observations read from the data set WORK.COHORTBIRTHDATES10.
NOTE: There were 271669 observations read from the data set WORK.COHORTBIRTHDATES11.
NOTE: There were 278966 observations read from the data set WORK.COHORTBIRTHDATES12.
NOTE: There were 215995 observations read from the data set WORK.COHORTBIRTHDATES13.
NOTE: There were 227072 observations read from the data set WORK.COHORTBIRTHDATES14.
NOTE: There were 163729 observations read from the data set WORK.COHORTBIRTHDATES15.
NOTE: There were 160583 observations read from the data set WORK.COHORTBIRTHDATES16.
NOTE: There were 148490 observations read from the data set WORK.COHORTBIRTHDATES17.
NOTE: There were 158157 observations read from the data set WORK.COHORTBIRTHDATES18.
NOTE: The data set WORK.COHORTBIRTHDATES has 2312352 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.14 seconds
      

503        
504        * Ensure we've only got one birthdate per person ------------------------------;
505        proc sort data=cohortBirthdates;
506        	by ENROLID BIRTH_DATE;
507        run;

NOTE: There were 2312352 observations read from the data set WORK.COHORTBIRTHDATES.
NOTE: The data set WORK.COHORTBIRTHDATES has 2312352 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.25 seconds
      cpu time            0.77 seconds
      

508        data cohortBirthdates (keep=ENROLID BIRTH_DATE);
509        	set cohortBirthdates;
510        	by ENROLID;
511        	if first.ENROLID;
512        run;

NOTE: There were 2312352 observations read from the data set WORK.COHORTBIRTHDATES.
NOTE: The data set WORK.COHORTBIRTHDATES has 2312082 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.27 seconds
      cpu time            0.27 seconds
      

513        proc delete data=cohortBirthdates08; run;

NOTE: Deleting WORK.COHORTBIRTHDATES08 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

20                                                         The SAS System                            13:36 Monday, September 5, 2022

514        proc delete data=cohortBirthdates09; run;

NOTE: Deleting WORK.COHORTBIRTHDATES09 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

515        proc delete data=cohortBirthdates10; run;

NOTE: Deleting WORK.COHORTBIRTHDATES10 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

516        proc delete data=cohortBirthdates11; run;

NOTE: Deleting WORK.COHORTBIRTHDATES11 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

517        proc delete data=cohortBirthdates12; run;

NOTE: Deleting WORK.COHORTBIRTHDATES12 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

518        proc delete data=cohortBirthdates13; run;

NOTE: Deleting WORK.COHORTBIRTHDATES13 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

519        proc delete data=cohortBirthdates14; run;

NOTE: Deleting WORK.COHORTBIRTHDATES14 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

520        proc delete data=cohortBirthdates15; run;

NOTE: Deleting WORK.COHORTBIRTHDATES15 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

521        proc delete data=cohortBirthdates16; run;

21                                                         The SAS System                            13:36 Monday, September 5, 2022

NOTE: Deleting WORK.COHORTBIRTHDATES16 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

522        proc delete data=cohortBirthdates17; run;

NOTE: Deleting WORK.COHORTBIRTHDATES17 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

523        proc delete data=cohortBirthdates18; run;

NOTE: Deleting WORK.COHORTBIRTHDATES18 (memtype=DATA).
NOTE: PROCEDURE DELETE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

524        
525        * Get yearly cohorts ----------------------------------------------------------;
526        %getcohort(year=08, yeartag=2); *2sam;
NOTE: Data file DAT08.CCAET082.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 25143252 observations read from the data set DAT08.CCAET082.
      WHERE (RX='1') and (AGE<=5);
NOTE: The data set WORK.COHORT08 has 25143252 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           6:50.92
      cpu time            6:40.53
      


NOTE: There were 25143252 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 25143252 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           3.52 seconds
      cpu time            10.31 seconds
      


WARNING: The variable BIRTH_DATE in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 51 observations read from the data set WORK.EGEOLOCLIST.
NOTE: There were 25143252 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 24917704 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           4.65 seconds
      cpu time            4.64 seconds
      


NOTE: There were 24917704 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 24917704 observations and 8 variables.
22                                                         The SAS System                            13:36 Monday, September 5, 2022

NOTE: PROCEDURE SORT used (Total process time):
      real time           4.51 seconds
      cpu time            10.31 seconds
      


NOTE: There were 2312082 observations read from the data set WORK.COHORTBIRTHDATES.
NOTE: There were 24917704 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 1043360 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           3.65 seconds
      cpu time            3.64 seconds
      


NOTE: There were 1043360 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 1043360 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.24 seconds
      cpu time            0.66 seconds
      


NOTE: There were 12 observations read from the data set WORK.DAYSPERMONTH.
NOTE: There were 1043360 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 1040644 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.36 seconds
      cpu time            0.37 seconds
      


NOTE: There were 1040644 observations read from the data set WORK.COHORT08.
NOTE: The data set WORK.COHORT08 has 1040644 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.15 seconds
      cpu time            0.16 seconds
      

527        %getcohort(year=09, yeartag=1); *1sam;
NOTE: Data file DAT09.CCAET091.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.

NOTE: There were 24833474 observations read from the data set DAT09.CCAET091.
      WHERE (RX='1') and (AGE<=5);
NOTE: The data set WORK.COHORT09 has 24833474 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           6:26.72
      cpu time            6:23.58
      


NOTE: There were 24833474 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 24833474 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           3.42 seconds
      cpu time            9.94 seconds
23                                                         The SAS System                            13:36 Monday, September 5, 2022

      


WARNING: The variable BIRTH_DATE in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 51 observations read from the data set WORK.EGEOLOCLIST.
NOTE: There were 24833474 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 24775217 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           4.62 seconds
      cpu time            4.60 seconds
      


NOTE: There were 24775217 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 24775217 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           4.61 seconds
      cpu time            10.44 seconds
      


NOTE: There were 2312082 observations read from the data set WORK.COHORTBIRTHDATES.
NOTE: There were 24775217 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 2682107 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           3.71 seconds
      cpu time            3.71 seconds
      


NOTE: There were 2682107 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 2682107 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.64 seconds
      cpu time            1.69 seconds
      


NOTE: There were 12 observations read from the data set WORK.DAYSPERMONTH.
NOTE: There were 2682107 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 2677752 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.86 seconds
      cpu time            0.86 seconds
      


NOTE: There were 2677752 observations read from the data set WORK.COHORT09.
NOTE: The data set WORK.COHORT09 has 2677752 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.41 seconds
      cpu time            0.41 seconds
      

528        %getcohort(year=10, yeartag=1); *1sam;
NOTE: Data file DAT10.CCAET101.DATA is in a format that is native to another host, or the file encoding does not match the session 
      encoding. Cross Environment Data Access will be used, which might require additional CPU resources and might reduce 
      performance.
24                                                         The SAS System                            13:36 Monday, September 5, 2022


NOTE: There were 26268900 observations read from the data set DAT10.CCAET101.
      WHERE (RX='1') and (AGE<=5);
NOTE: The data set WORK.COHORT10 has 26268900 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           7:13.55
      cpu time            7:11.39
      


NOTE: There were 26268900 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 26268900 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           3.75 seconds
      cpu time            10.98 seconds
      


WARNING: The variable BIRTH_DATE in the DROP, KEEP, or RENAME list has never been referenced.
NOTE: There were 51 observations read from the data set WORK.EGEOLOCLIST.
NOTE: There were 26268900 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 25999890 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           4.95 seconds
      cpu time            4.94 seconds
      


NOTE: There were 25999890 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 25999890 observations and 8 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           4.93 seconds
      cpu time            11.09 seconds
      


NOTE: There were 2312082 observations read from the data set WORK.COHORTBIRTHDATES.
NOTE: There were 25999890 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 3657571 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           4.00 seconds
      cpu time            3.99 seconds
      


NOTE: There were 3657571 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 3657571 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.86 seconds
      cpu time            2.31 seconds
      


NOTE: There were 12 observations read from the data set WORK.DAYSPERMONTH.
NOTE: There were 3657571 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 3652373 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           1.15 seconds
25                                                         The SAS System                            13:36 Monday, September 5, 2022

      cpu time            1.15 seconds
      


NOTE: There were 3652373 observations read from the data set WORK.COHORT10.
NOTE: The data set WORK.COHORT10 has 3652373 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.55 seconds
      cpu time            0.55 seconds
      